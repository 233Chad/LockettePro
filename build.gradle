apply plugin: 'java'

sourceCompatibility = 1.8
targetCompatibility = 1.8

version = "2.9.%s-1.14-pre5"

if (System.getenv("TRAVIS_BUILD_NUMBER") != null) {
    project.version = String.format(project.version, System.getenv("TRAVIS_BUILD_NUMBER"))
} else {
    project.version = String.format(project.version, "0")
}

repositories {
    jcenter()

    maven {
        name 'Spigot'
        url 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/'
    }

    maven {
        name 'Sonatype'
        url 'https://oss.sonatype.org/content/groups/public'
    }

    maven {
        name 'sk89q'
        url 'http://maven.sk89q.com/artifactory/repo/'
    }

    maven {
        name 'vault-repo'
        url 'http://nexus.hc.to/content/repositories/pub_releases'
    }

    maven {
        name 'dmulloy2'
        url 'http://repo.dmulloy2.net/content/groups/public/'
    }
}

dependencies {
    compile 'org.bukkit:bukkit:1.14-pre5-SNAPSHOT'
    compile('net.milkbowl.vault:VaultAPI:1.7') {
        transitive = false
    }
    compile('com.sk89q.worldguard:worldguard-legacy:7.0.0-SNAPSHOT') {
        transitive = false
    }
    compile('com.comphenix.protocol:ProtocolLib-API:4.4.0-SNAPSHOT') {
        //transitive = false
    }
    compile files('lib/CoreProtect-2.15.1-API-v6.jar')
}
compileJava {
    options.compilerArgs += ["-Xlint:deprecation"]
}
processResources {
    expand version: project.version
}